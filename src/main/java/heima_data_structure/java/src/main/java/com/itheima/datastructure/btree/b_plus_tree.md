
https://mp.weixin.qq.com/s/BXfogZuQ0NRYm24zh2NI9w

删除
1. 定位元素
    - 从 B+ 树的根节点开始查找，将待删除元素与当前节点中的关键字进行比较。如果待删除元素小于当前节点的关键字，就遍历左边的子树节点；如果待删除元素大于当前节点的关键字，就遍历右边的子树节点。然后查找到前面指向的路径的继续查找。这个过程会一直持续，直到找到包含待删除元素的叶子节点。

2. 在子节点中删除元素
    - 找到叶子节点后，从叶子节点的关键字序列中删除目标元素。删除后，需要检查叶子节点中的关键字数量是否满足 B + 树的下限要求。一般来说，如果 B + 树的阶数为 m（表示一个节点最多有 m - 1 个关键字），那么叶子节点至少应该有 ⌈m/2⌉ - 1 个关键字。
        - 例如，对于阶数 m = 5 的 B + 树，叶子节点最少应该有 ⌈5/2⌉ - 1 = 2 个关键字。如果删除元素后，叶子节点的关键字数量仍然不低于这个下限，那么删除操作就基本完成了。

3. 叶子节点关键字数量不足 - 借关键字(借用关键字的本质适当做索引，原有节点的被借用的值 不会在原有节点中删除 相当于拷贝这个值到父节点)
    - 如果叶子节点中关键字数量低于下限，首先尝试从相邻的兄弟节点（左兄弟或右兄弟）借关键字。假设叶子节点为 N，其左兄弟节点为 L，右兄弟节点为 R。
        - 如果 L 的关键字数量大于 > ⌈m/2⌉ - 1，可以从 L 借一个关键字。具体操作是：将 L 中的最大关键字（假设 L 中的关键字是升序排列）上移到父节点中，替换父节点中分隔 L 和 N 的关键字，然后将父节点中的这个关键字下移到 N 中。
        - 类似地，如果 R 的关键字数量 > ⌈m/2⌉ - 1，可以从 R 借一个关键字。将 R 中的最小关键字上移到父节点中，替换父节点中分隔 N 和 R 的关键字，然后将父节点中的这个关键字下移到 N 中。

4. 叶子节点关键字数量不足 - 合并节点
    - 如果相邻兄弟节点（左兄弟和右兄弟）的关键字数量都等于 ⌈m/2⌉ - 1，则无法借关键字，必须需要合并节点。
        - 如果选择与左兄弟节点 L 合并，将 N 中的关键字和 L 中的关键字合并成一个新的节点，这个新节点将取代原来的 L 和 N。
            同时，在父节点中删除分隔 L 和 N 的关键字，并且调整父节点中指向 L 和 N 的指针。
        - 同样，如果选择与右兄弟节点 R 合并，操作类似，将 N 和 R 中的关键字合并，在父节点中进行相应的关键字和指针调整。

5. 通过调节父节点
    - 当合并节点后，父节点的关键字数量可能会减少。如果父节点的关键字数量低于 ⌈m/2⌉ - 1，就需要对父节点进行类似的调整（借关键字或合并节点）。这个过程可能会一直向上递归，直到根节点。

6. 处理根节点特殊情况
    - 如果在调整过程中，根节点的关键字数量变为 0，且根节点只有一个子节点，那么将这个子节点作为新的根节点，B + 树的高度减 1。这是一种特殊情况，因为根节点是树的顶层节点，它的变化会影响树的整体结构
